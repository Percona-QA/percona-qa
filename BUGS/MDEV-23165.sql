USE test;
SET GLOBAL innodb_limit_optimistic_INSERT_debug=2;
CREATE TABLE t (c INT, INDEX(c)) ENGINE=InnoDB;
REPLACE t VALUES (1),(1),(2),(3),(4),(5),(NULL);
INSERT INTO t VALUES (10000),(1),(1.1),(1),(1),(1),(1),(1),(1),(1),(1),(1),(1);
INSERT INTO t VALUES (10000),(1),(1.1),(1),(1),(1),(1),(1),(1),(1),(1),(1),(1);
INSERT INTO t VALUES (10000),(1),(1.1),(1),(1),(1),(1),(1),(1),(1),(1),(1),(1);
INSERT INTO t SELECT * FROM t;
INSERT INTO t SELECT * FROM t;
INSERT INTO t VALUES (NULL),(1);
INSERT INTO t SELECT * FROM t;
INSERT INTO t SELECT * FROM t;
INSERT INTO t SELECT * FROM t;
INSERT INTO t SELECT * FROM t;
INSERT INTO t SELECT * FROM t;
INSERT INTO t SELECT * FROM t;
INSERT INTO t SELECT * FROM t;
INSERT INTO t SELECT * FROM t;  # Approx crash location
INSERT INTO t SELECT * FROM t; 
INSERT INTO t SELECT * FROM t; 

SET SQL_MODE='';
USE test;
SET GLOBAL innodb_limit_optimistic_INSERT_debug=2;
CREATE TABLE t (a INT,b VARCHAR(20),KEY(a));
INSERT INTO t (a) VALUES ('a'),('b'),('c'),('d'),('e');
INSERT INTO t VALUES (1,''),(2,''),(3,''),(4,''),(5,''),(6,''),(7,'');
INSERT INTO t SELECT * FROM t;
INSERT INTO t SELECT a,a FROM t;
INSERT INTO t SELECT * FROM t;
INSERT INTO t SELECT * FROM t;
INSERT INTO t SELECT * FROM t;
INSERT INTO t SELECT * FROM t;
INSERT INTO t SELECT * FROM t;
INSERT INTO t SELECT * FROM t;

USE test;
CREATE TABLE t1 (a int not null primary key) ;
SET @commands= 'abcdefghijklmnopqrstuvwxyz';
set global innodb_simulate_comp_failures=99;
INSERT INTO t1  VALUES(1);
SET @@GLOBAL.OPTIMIZER_SWITCH="mrr=OFF";
INSERT INTO t1  VALUES ('abcdefghijklmnopqrstuvwxyz');
INSERT INTO t1  VALUES(0xA6E0);
ALTER TABLE t1 ROW_FORMAT=DEFAULT KEY_BLOCK_SIZE=2;
CREATE DEFINER=CURRENT_USER FUNCTION f3 (i1 DATETIME(2)) RETURNS DECIMAL(1) UNSIGNED SQL SECURITY INVOKER RETURN CONCAT('abcdefghijklmnopqrstuvwxyz',i1);

USE test;
CREATE TABLE t (a INT PRIMARY KEY);
SET GLOBAL innodb_simulate_comp_failures=99;
INSERT INTO t VALUES(1);
INSERT INTO t VALUES(0);
ALTER TABLE t ROW_FORMAT=DEFAULT KEY_BLOCK_SIZE=2;

SET SQL_MODE='';
USE test;
CREATE TABLE tab(c INT) ROW_FORMAT=COMPRESSED;
SET GLOBAL INNODB_LIMIT_OPTIMISTIC_INSERT_DEBUG=2;
CREATE TABLE t (c INT);
INSERT INTO t VALUES (1),(2),(3),(4);
INSERT INTO t SELECT t.* FROM t,t t2,t t3,t t4,t t5,t t6,t t7;
SET GLOBAL INNODB_RANDOM_READ_AHEAD=1;
INSERT INTO tab(c) VALUES(1);
